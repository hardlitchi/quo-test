
# 開発環境構築手順

## 前提条件
- Java 21がインストールされていること
- Dockerがインストールされていること（データベース用）

## 1. プロジェクトのクローン・取得
```bash
# プロジェクトディレクトリに移動
cd quo-test
```

## 2. データベースの起動
PostgreSQLをDocker Composeで起動します。
```bash
# PostgreSQLコンテナをバックグラウンドで起動
docker compose up -d

# 起動確認
docker compose ps
```

## 3. アプリケーションのビルド
```bash
# Gradleラッパーを使用してビルド
./gradlew build
```

## 4. アプリケーションの起動
```bash
# Spring Bootアプリケーションを起動
./gradlew bootRun
```

アプリケーションは http://localhost:8081 で起動します。

## 5. データベース初期化（初回のみ）
データベースのテーブルを作成する際は、以下の手順で行います：

1. Flywayマイグレーションファイルを作成
2. application.ymlでFlyway設定を有効化
3. jOOQコード生成を実行

```bash
# Flywayマイグレーション実行
./gradlew flywayMigrate

# jOOQクラス生成
./gradlew generateJooq
```

## 開発用コマンド
```bash
# テスト実行
./gradlew test

# アプリケーション停止時のデータベース停止
docker compose down

# データベースボリューム含めて削除（データ初期化）
docker compose down -v
```

## トラブルシューティング
- ポート8081が使用中の場合：application.ymlのserver.portを変更
- データベース接続エラー：PostgreSQLコンテナが起動しているか確認
- ビルドエラー：Java 21が正しくインストールされているか確認
